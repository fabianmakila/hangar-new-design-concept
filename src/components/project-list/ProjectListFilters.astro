---
import { Icon } from 'astro-icon/components'
import IconValuePair from '../IconValuePair.astro';

const platforms = ["paper", "velocity", "waterfall"];
const tags = ["Addon", "Library", "Supports Folia"];
const categories = [
    "Admin Tools",
    "Chat",
    "Developer Tools",
    "Economy",
    "Gameplay",
    "Games",
    "Protection",
    "Role Playing",
    "World Management",
    "Miscellaneous"
    ];

function capitalize(string) {
    return String(string).charAt(0).toUpperCase() + String(string).slice(1);
}
---

<div class="flex flex-col md:sticky top-4">
    <button id="toggleFilterMenu" class="bg-zinc-700 px-4 py-2 flex items-center justify-between gap-4 rounded hover:text-blue-500 hover:bg-zinc-700">
        <h2 class="font-bold">
            <IconValuePair name="fa6-solid:list" value="Filters" />
        </h2>
        <Icon name="fa6-solid:chevron-down" />
    </button>
    <div id="filterMenu" class="p-4 flex flex-col gap-4 text-nowrap rounded-b bg-zinc-900">
        <div>
            <h3 class="font-bold text-gray-500 text-sm">Platform</h3>
            {
                platforms.map((platform) => {
                    const platformId = "filterPlatform" + capitalize(platform);
                    return (
                    <div class="flex gap-2">
                        <input type="radio" name="platform" id={platformId} />
                        <label class="capitalize hover:text-blue-500" for={platformId}>{platform}</label>
                    </div>
                    )
                })
            }
        </div>
        <div>
            <h3 class="font-bold text-gray-500 text-sm">Tags</h3>
            {
                tags.map(tag => {
                    const tagId = "filterTags" + capitalize(tag);
                    return (
                    <div class="flex gap-2">
                        <input type="checkbox" name="tags" id={tagId} />
                        <label class="capitalize hover:text-blue-500" for={tagId}>{tag}</label>
                    </div>
                    )
                })
            }
        </div>
        <div>
            <h3 class="font-bold text-gray-500 text-sm">Categories</h3>
            {
                categories.map(category => {
                    const categoryId = "filterCategory" + capitalize(category);
                    return (
                    <div class="flex gap-2">
                        <input type="checkbox" name="category" id={categoryId} />
                        <label class="capitalize hover:text-blue-500" for={categoryId}>{category}</label>
                    </div>
                    )
                })
            }
        </div>
    </div>
</div>

<script>
    const toggleFilterMenuButton = document.querySelector("#toggleFilterMenu");
    const filterMenu = document.querySelector("#filterMenu");

    function toggleFilterMenu() {
        if (filterMenu?.classList.contains('hidden')) {
            filterMenu?.classList.remove('hidden')
        } else {
            filterMenu?.classList.add('hidden');
        }
    }

    toggleFilterMenuButton.addEventListener('click', toggleFilterMenu);
</script>